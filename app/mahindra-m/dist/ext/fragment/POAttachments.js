sap.ui.define(["sap/m/MessageToast","jquery.sap.global"],function(e){"use strict";return{onAfterItemAdded:async function(t){debugger;const o=t.oSource.getModel().getServiceUrl();const s=/PurchaseOrder\([^)]*\)/;const n=window.location.href.match(s);const r=n?n[0]:"";const i=t.getParameter("item");const l={mediaType:i.getMediaType(),fileName:i.getFileName(),size:i.getFileObject().size,poID:r.split("(")[1].split(")")[0]};const c={url:o+r+"/TeatoFile",method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(l)};try{const e=await new Promise((e,t)=>{$.ajax(c).done(t=>{e(t.ID)}).fail(e=>{t(e)})});const t=`${o}Files(ID=${e},IsActiveEntity=false)/content`;i.setUploadUrl(t);i.setUrl(t);const s=this.byId("uploadSet");s.setHttpRequestMethod("PUT");s.uploadItem(i)}catch(t){console.error(t);e.show("Error during file upload.")}},onUploadCompleted:function(t){debugger;const o=this.byId("uploadSet");o.removeAllIncompleteItems();e.show("All uploads completed successfully.")},onOpenPressed:function(e){debugger;const t=e.oSource.getModel().getServiceUrl();const o=e.oSource.mProperties.url;const s=/Files.*$/;const n=o.match(s);if(n){const e=t+n[0];window.open(e,"_blank")}},onAfterItemRemoved:function(t){debugger;const o=t.oSource.getModel().getServiceUrl();const s=/^(.*?),IsActiveEntity=/;const n=t.mParameters.item.mProperties.url.match(s);if(n){let t=n[1]+",IsActiveEntity=false)";t=t.replace(/^.*\/Files/,"/Files");$.ajax({url:o+t,method:"DELETE"}).done(()=>{e.show("File removed successfully.")}).fail(()=>{e.show("Error removing file.")})}}}});
//# sourceMappingURL=POAttachments.js.map